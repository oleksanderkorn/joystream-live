(this["webpackJsonpjoystream-validator-stats"]=this["webpackJsonpjoystream-validator-stats"]||[]).push([[0],{558:function(t,e,n){},560:function(t,e,n){},568:function(t,e){},570:function(t,e){},575:function(t,e){},578:function(t,e){},579:function(t,e){},637:function(t,e){},640:function(t,e){},642:function(t,e){},652:function(t,e){},654:function(t,e){},680:function(t,e){},682:function(t,e){},687:function(t,e){},689:function(t,e){},695:function(t,e){},697:function(t,e){},709:function(t,e){},712:function(t,e){},726:function(t,e){},729:function(t,e){},740:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(45),c=n.n(s),i=(n(558),n(19)),o=n.n(i),u=n(13),h=n(34),p=n(54),l=n(3),d=n(9),f=n(10),b=n(7),k=n(8),m=n.p+"static/media/joystream.f5df567f.svg",x=(n(560),n(1)),g=n(802),v=n(805),j=n(516),w=n(523),O=n(243),y=n.n(O),S=n(256),E=n.n(S);E.a.defaultFormat="YYYY-MM-DD HH:mm:ss";Object(w.config)();var B=function(){function t(e){Object(l.a)(this,t),this.endpoint=void 0,this.isReady=void 0,this.api=void 0;var n=e||Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PROVIDER||"ws://127.0.0.1:9944";!function(){for(var t,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];(t=console).log.apply(t,["[".concat(E()().format(),"]:")].concat(n))}("Endpoint: [".concat(n,"]")),this.endpoint=n,this.isReady=Object(h.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new g.a({provider:new v.a(n),types:j.types}).isReadyOrError;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))()}return Object(d.a)(t,[{key:"init",get:function(){var t=this;return this.isReady.then((function(e){return t.api=e,t}))}},{key:"totalIssuance",value:function(){var t=Object(h.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=6;break}return t.next=3,this.api.query.balances.totalIssuance();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.api.query.balances.totalIssuance.at(e);case 8:t.t0=t.sent;case 9:return n=t.t0,t.abrupt("return",n.toNumber());case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"systemData",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a,r,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.api.rpc.system.chain(),this.api.rpc.system.name(),this.api.rpc.system.version(),this.api.rpc.system.peers()]);case 2:return e=t.sent,n=Object(x.a)(e,4),a=n[0],r=n[1],s=n[2],c=n[3],t.abrupt("return",{chain:a.toString(),nodeName:r.toString(),nodeVersion:s.toString(),peerCount:c.length});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedHash",value:function(){var t=Object(h.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.rpc.chain.getFinalizedHead());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedBlockHeight",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.finalizedHash();case 2:return e=t.sent,t.next=5,this.api.rpc.chain.getHeader("".concat(e));case 5:return n=t.sent,a=n.number,t.abrupt("return",a.toNumber());case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getActiveEras",value:function(){var t=Object(h.a)(o.a.mark((function t(e){var n,a,r,s,c,i,u,h,p,l,d,f,b=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",a=1069639,t.next=4,this.api.rpc.chain.getBlockHash(a);case 4:return r=t.sent,console.log("Start Hash [".concat(r,"]")),t.next=8,this.api.query.staking.activeEra.at(r);case 8:return s=t.sent.unwrap().index.toNumber(),console.log("Start Era [".concat(s,"]")),t.t0=Date,t.next=13,this.api.query.timestamp.now.at(r);case 13:return t.t1=t.sent.toNumber(),c=new t.t0(t.t1).toISOString(),console.log("Start Date [".concat(c,"]")),i=1270177,t.next=19,this.api.rpc.chain.getBlockHash(i);case 19:return u=t.sent,console.log("End Hash [".concat(u,"]")),t.next=23,this.api.query.staking.activeEra.at(u);case 23:return h=t.sent.unwrap().index.toNumber(),console.log("End Era [".concat(h,"]")),t.t2=Date,t.next=28,this.api.query.timestamp.now.at(u);case 28:t.t3=t.sent.toNumber(),p=new t.t2(t.t3).toISOString(),console.log("End Date [".concat(p,"]")),l=[],d=o.a.mark((function t(e){var a,r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.api.rpc.chain.getBlockHash(e);case 2:return a=t.sent,t.next=5,b.api.query.staking.activeEra.at(a);case 5:return r=t.sent.unwrap().index.toNumber(),t.t0=Date,t.next=9,b.api.query.timestamp.now.at(a);case 9:return t.t1=t.sent.toNumber(),s=new t.t0(t.t1).toISOString(),t.next=13,b.api.query.staking.erasRewardPoints.at(a,r);case 13:t.sent.individual.forEach((function(t,e){if(e.toString()===n){var a=r;l.indexOf(a)<0&&(l.push(a),console.log("Era [".concat(r,"], Date [").concat(s,"]")))}}));case 15:case"end":return t.stop()}}),t)})),f=a;case 34:if(!(f<i)){t.next=39;break}return t.delegateYield(d(f),"t4",36);case 36:f+=1,t.next=34;break;case 39:return t.abrupt("return",{activeEras:l});case 40:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getActiveErasForBlock",value:function(){var t=Object(h.a)(o.a.mark((function t(e,n){var a,r,s,c,i,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",t.next=3,this.api.rpc.chain.getBlockHash(n);case 3:return r=t.sent,t.next=6,this.api.query.staking.activeEra.at(r);case 6:return s=t.sent.unwrap().index.toNumber(),t.t0=Date,t.next=10,this.api.query.timestamp.now.at(r);case 10:return t.t1=t.sent.toNumber(),c=new t.t0(t.t1).toISOString(),t.next=14,this.api.query.staking.erasRewardPoints.at(r,s);case 14:return i=t.sent,u=void 0,i.individual.forEach((function(t,e){if(e.toString()===a){var i=Number(t.toBigInt()),o={id:n,era:s,hash:r.toString(),block:n,date:c,points:i};console.log("Era [".concat(o.era,"], Block [").concat(o.block,"], Date [").concat(o.date,"], Points [").concat(o.points,"], Hash [").concat(o.hash,"]")),u=o}})),t.abrupt("return",u);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"scoringPeriodData",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a,r,s,c,i,u,h,p,l,d,f;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=127e4,a=[],r=e=1069700;case 4:return t.next=7,this.api.rpc.chain.getBlockHash(r);case 7:return s=t.sent,t.next=10,this.api.query.staking.activeEra.at(s);case 10:return c=t.sent.unwrap().index.toNumber(),t.t0=Date,t.next=14,this.api.query.timestamp.now.at(s);case 14:if(t.t1=t.sent.toNumber(),i=new t.t0(t.t1).toISOString(),a.push({newBlock:r,blockHash:s,blockEra:c,blockTimestamp:i}),!(i.indexOf("2021-06-20")>-1)){t.next=19;break}return t.abrupt("break",22);case 19:r-=1,t.next=4;break;case 22:return t.next=24,this.api.rpc.chain.getBlockHash(e);case 24:return u=t.sent,t.next=27,this.api.query.staking.activeEra.at(u);case 27:return h=t.sent.unwrap().index.toNumber(),t.t2=Date,t.next=31,this.api.query.timestamp.now.at(u);case 31:return t.t3=t.sent.toNumber(),p=new t.t2(t.t3).toISOString(),t.next=35,this.api.rpc.chain.getBlockHash(n);case 35:return l=t.sent,t.t4=Date,t.next=39,this.api.query.timestamp.now.at(l);case 39:return t.t5=t.sent.toNumber(),d=new t.t4(t.t5).toISOString(),t.next=43,this.api.query.staking.activeEra.at(l);case 43:return f=t.sent.unwrap().index.toNumber(),t.abrupt("return",{startEra:h,startHash:u,startTimestamp:p,endEra:f,endHash:l,endTimestamp:d,blocksData:a});case 45:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"eraData",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a,r,s,c,i,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",t.next=3,this.api.query.system.account(e);case 3:return n=t.sent,t.next=6,this.api.query.staking.currentEra();case 6:return a=t.sent,r=this.api.rpc.chain.getHeader(),t.next=10,this.api.query.system.account.hash(e);case 10:return s=t.sent,t.next=13,this.api.query.system.account.size(e);case 13:return c=t.sent,t.next=16,this.api.derive.staking.stashes();case 16:return i=t.sent.map((function(t){return String(t)})),t.next=19,this.api.query.staking.erasStakers(a.unwrap(),i[0]);case 19:return u=t.sent,t.abrupt("return",{currentEra:a.isSome?a.unwrap().toNumber():{},firstHead:r,account:n,currHash:s,currSize:c,stashes:i,stakers:u});case 21:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"findActiveValidators",value:function(){var t=Object(h.a)(o.a.mark((function t(e,n){var a,r,s,c,i,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getBlock(e);case 2:a=t.sent,r=a.block.header.number.toNumber();case 4:return t.next=6,this.api.rpc.chain.getBlockHash(r);case 6:return c=t.sent,t.next=9,this.api.query.staking.snapshotValidators.at(c);case 9:if((i=t.sent).isEmpty){t.next=15;break}return t.next=13,this.api.query.staking.validatorCount.at(c);case 13:u=t.sent.toNumber(),s=Array.from(i.unwrap()).slice(0,u);case 15:n?--r:++r;case 16:if(void 0===s){t.next=4;break}case 17:return t.abrupt("return",s);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"validatorsData",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.query.session.validators();case 2:return e=t.sent,t.next=5,this.api.query.staking.currentEra();case 5:if(!(n=t.sent).isSome){t.next=12;break}return t.next=9,this.api.query.staking.erasTotalStake(n.unwrap());case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=new y.a(0);case 13:return a=t.t0,t.abrupt("return",{count:e.length,validators:e.toJSON(),total_stake:a.toNumber()});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),q=n(33);function N(t){return Promise.all(Object.entries(t).map((function(t){var e=Object(x.a)(t,2),n=e[0],a=e[1];return a instanceof Promise?a.then((function(t){return[n,t]})):new Promise((function(t){return t([n,a])}))}))).then((function(t){return t.reduce((function(t,e){var n=Object(x.a)(e,2),a=n[0],r=n[1];return Object(p.a)(Object(p.a)({},t),{},Object(q.a)({},a,r))}),{})}))}var H=new B("wss://rome-rpc-endpoint.joystream.org:9944/");function D(t,e){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(o.a.mark((function t(e,n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.init;case 2:return t.t0=N,t.next=5,H.getActiveErasForBlock(e,n);case 5:return t.t1=t.sent,t.t2={status:t.t1},t.next=9,(0,t.t0)(t.t2);case 9:return a=t.sent,console.log(a),t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var C=n(799),I=n(800),P=n(804),T=n(23),L=n(801),R=n(526),F=n(64),W=function(t){Object(b.a)(n,t);var e=Object(k.a)(n);function n(t){var a;return Object(l.a)(this,n),(a=e.call(this,t)).state={shouldStop:!1,rows:[],columns:[{field:"era",headerName:"Era",width:100,sortable:!0,headerAlign:"center"},{field:"block",headerName:"Block",width:100,sortable:!0,headerAlign:"center"},{field:"date",headerName:"Date",width:200,sortable:!0,headerAlign:"center"},{field:"points",headerName:"Points",width:100,sortable:!0,headerAlign:"center"},{field:"hash",headerName:"Block Hash",width:500,sortable:!1,headerAlign:"center"}],stash:"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",startBlock:1069639,endBlock:1270177,isLoading:!1},a.getStatus=a.getStatus.bind(Object(f.a)(a)),a.setStash=a.setStash.bind(Object(f.a)(a)),a.setBlockStart=a.setBlockStart.bind(Object(f.a)(a)),a.setBlockEnd=a.setBlockEnd.bind(Object(f.a)(a)),a}return Object(d.a)(n,[{key:"setStash",value:function(t){console.log(t),this.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{stash:t.target.value})}))}},{key:"setBlockStart",value:function(t){console.log(t),this.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{startBlock:t.target.value})}))}},{key:"setBlockEnd",value:function(t){console.log(t),this.setState((function(e){return Object(p.a)(Object(p.a)({},e),{},{endBlock:t.target.value})}))}},{key:"getStatus",value:function(){var t=Object(h.a)(o.a.mark((function t(){var e,n,a,r,s,c,i,h=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.state.stash,n=this.state.startBlock,a=this.state.endBlock,!this.state.isLoading){t.next=7;break}return this.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{shouldStop:!0,isLoading:!1})})),t.abrupt("return");case 7:if(this.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{isLoading:!0,rows:[]})})),!(n<a)){t.next=21;break}r=o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.state.shouldStop){t.next=3;break}return h.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{shouldStop:!1})})),t.abrupt("return","break");case 3:return t.next=5,D(e,n);case 5:(a=t.sent)&&h.state.rows.indexOf(a.status)<0&&h.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{rows:[].concat(Object(u.a)(h.state.rows),[a.status])})}));case 7:case"end":return t.stop()}}),t)})),s=n;case 11:if(!(s<=a)){t.next=19;break}return t.delegateYield(r(s),"t0",13);case 13:if("break"!==t.t0){t.next=16;break}return t.abrupt("break",19);case 16:s+=1,t.next=11;break;case 19:t.next=31;break;case 21:c=o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.state.shouldStop){t.next=3;break}return h.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{shouldStop:!1})})),t.abrupt("return","break");case 3:return t.next=5,D(e,n);case 5:(a=t.sent)&&h.state.rows.indexOf(a.status)<0&&h.setState((function(t){return Object(p.a)(Object(p.a)({},t),{},{rows:[].concat(Object(u.a)(h.state.rows),[a.status])})}));case 7:case"end":return t.stop()}}),t)})),i=n;case 23:if(!(i>=a)){t.next=31;break}return t.delegateYield(c(i),"t1",25);case 25:if("break"!==t.t1){t.next=28;break}return t.abrupt("break",31);case 28:i-=1,t.next=23;break;case 31:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(C.a,{maxWidth:"lg",children:Object(F.jsxs)(I.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3,children:[Object(F.jsx)(I.a,{container:!0,item:!0,lg:12}),Object(F.jsx)("img",{src:m,className:"App-logo",alt:"Joystream logo"}),Object(F.jsx)(I.a,{container:!0,item:!0,lg:12,children:Object(F.jsx)(P.a,{onChange:this.setStash,fullWidth:!0,id:"stash",label:"Stash",value:this.state.stash,variant:"filled"})}),Object(F.jsx)(I.a,{container:!0,item:!0,lg:12,children:Object(F.jsx)(P.a,{onChange:this.setBlockStart,fullWidth:!0,id:"block-start",label:"Start Block",value:this.state.startBlock,variant:"filled"})}),Object(F.jsx)(I.a,{container:!0,item:!0,lg:12,children:Object(F.jsx)(P.a,{onChange:this.setBlockEnd,fullWidth:!0,id:"block-end",label:"End Block",value:this.state.endBlock,variant:"filled"})}),Object(F.jsx)(I.a,{container:!0,item:!0,lg:12,children:Object(F.jsx)(Y,{fullWidth:!0,onClick:this.getStatus,color:"primary",children:this.state.isLoading?"Stop":"Get Status"})}),Object(F.jsx)("div",{style:{height:600,width:"98%"},children:Object(F.jsx)(R.a,{rows:this.state.rows,columns:this.state.columns,pageSize:50})})]})})})}}]),n}(a.Component),Y=Object(T.a)({root:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,color:"#ffffff",backgroundColor:"#0063cc",borderColor:"#0063cc",fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{backgroundColor:"#0069d9",borderColor:"#0062cc",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"#0062cc",borderColor:"#005cbf"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})(L.a),_=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,808)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),s(t),c(t)}))};c.a.render(Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsx)(W,{})}),document.getElementById("root")),_()}},[[740,1,2]]]);
//# sourceMappingURL=main.e61991d2.chunk.js.map