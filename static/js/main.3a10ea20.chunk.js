(this["webpackJsonpjoystream-validator-stats"]=this["webpackJsonpjoystream-validator-stats"]||[]).push([[0],{563:function(t,e,n){},565:function(t,e,n){},573:function(t,e){},575:function(t,e){},580:function(t,e){},583:function(t,e){},584:function(t,e){},642:function(t,e){},645:function(t,e){},647:function(t,e){},657:function(t,e){},659:function(t,e){},685:function(t,e){},687:function(t,e){},692:function(t,e){},694:function(t,e){},700:function(t,e){},702:function(t,e){},714:function(t,e){},717:function(t,e){},731:function(t,e){},734:function(t,e){},745:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),s=n(47),c=n.n(s),i=(n(563),n(13)),o=n(19),u=n.n(o),l=n(39),h=n(34),d=n(4),p=n(9),f=n(10),b=n(7),v=n(8),m=n.p+"static/media/joystream.f5df567f.svg",k=(n(565),n(1)),j=n(806),x=n(811),g=n(518),O=n(525),S=n(247),w=n.n(S),y=n(392);n.n(y).a.defaultFormat="YYYY-MM-DD HH:mm:ss";Object(O.config)();var B=function(){function t(e){Object(d.a)(this,t),this.endpoint=void 0,this.isReady=void 0,this.api=void 0;var n=e||Object({NODE_ENV:"production",PUBLIC_URL:"/joystream-live",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).PROVIDER||"ws://127.0.0.1:9944";this.endpoint=n,this.isReady=Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new j.a({provider:new x.a(n),types:g.types}).isReadyOrError;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))()}return Object(p.a)(t,[{key:"init",get:function(){var t=this;return this.isReady.then((function(e){return t.api=e,t}))}},{key:"totalIssuance",value:function(){var t=Object(h.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=6;break}return t.next=3,this.api.query.balances.totalIssuance();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.api.query.balances.totalIssuance.at(e);case 8:t.t0=t.sent;case 9:return n=t.t0,t.abrupt("return",n.toNumber());case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"systemData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,a,r,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.api.rpc.system.chain(),this.api.rpc.system.name(),this.api.rpc.system.version(),this.api.rpc.system.peers()]);case 2:return e=t.sent,n=Object(k.a)(e,4),a=n[0],r=n[1],s=n[2],c=n[3],t.abrupt("return",{chain:a.toString(),nodeName:r.toString(),nodeVersion:s.toString(),peerCount:c.length});case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedHash",value:function(){var t=Object(h.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.rpc.chain.getFinalizedHead());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedBlockHeight",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.finalizedHash();case 2:return e=t.sent,t.next=5,this.api.rpc.chain.getHeader("".concat(e));case 5:return n=t.sent,a=n.number,t.abrupt("return",a.toNumber());case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getActiveEras",value:function(){var t=Object(h.a)(u.a.mark((function t(e){var n,a,r,s,c,i,o,l,h,d,p,f,b=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e||"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",a=1069639,t.next=4,this.api.rpc.chain.getBlockHash(a);case 4:return r=t.sent,"Start Hash [".concat(r,"]"),t.next=8,this.api.query.staking.activeEra.at(r);case 8:return s=t.sent.unwrap().index.toNumber(),"Start Era [".concat(s,"]"),t.t0=Date,t.next=13,this.api.query.timestamp.now.at(r);case 13:return t.t1=t.sent.toNumber(),c=new t.t0(t.t1).toISOString(),"Start Date [".concat(c,"]"),i=1270177,t.next=19,this.api.rpc.chain.getBlockHash(i);case 19:return o=t.sent,"End Hash [".concat(o,"]"),t.next=23,this.api.query.staking.activeEra.at(o);case 23:return l=t.sent.unwrap().index.toNumber(),"End Era [".concat(l,"]"),t.t2=Date,t.next=28,this.api.query.timestamp.now.at(o);case 28:t.t3=t.sent.toNumber(),h=new t.t2(t.t3).toISOString(),"End Date [".concat(h,"]"),d=[],p=u.a.mark((function t(e){var a,s,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.api.rpc.chain.getBlockHash(e);case 2:return a=t.sent,"Block Hash [".concat(r,"]"),t.next=6,b.api.query.staking.activeEra.at(a);case 6:return s=t.sent.unwrap().index.toNumber(),"Block Era [".concat(s,"]"),t.t0=Date,t.next=11,b.api.query.timestamp.now.at(a);case 11:return t.t1=t.sent.toNumber(),c=new t.t0(t.t1).toISOString(),"Block Date [".concat(c,"]"),t.next=16,b.api.query.staking.erasRewardPoints.at(a,s);case 16:i=t.sent,"Era Points [".concat(i,"]"),i.individual.forEach((function(t,e){if("Author Points [".concat(e,"]"),"Individual Points [".concat(t,"]"),e.toString()===n){var a=s;d.indexOf(a)<0&&(d.push(a),"Era [".concat(s,"], Date [").concat(c,"]"))}}));case 19:case"end":return t.stop()}}),t)})),f=a;case 34:if(!(f<i)){t.next=39;break}return t.delegateYield(p(f),"t4",36);case 36:f+=1,t.next=34;break;case 39:return t.abrupt("return",{activeEras:d});case 40:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getActiveErasForBlock",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){var a,r,s,c,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",t.next=3,this.api.rpc.chain.getBlockHash(n);case 3:return r=t.sent,t.next=6,this.api.query.staking.activeEra.at(r);case 6:return s=t.sent.unwrap().index.toNumber(),t.t0=Date,t.next=10,this.api.query.timestamp.now.at(r);case 10:return t.t1=t.sent.toNumber(),c=new t.t0(t.t1).toISOString(),t.next=14,this.api.query.staking.erasRewardPoints.at(r,s);case 14:return i=t.sent,o=void 0,i.individual.forEach((function(t,e){if("Author Points [".concat(e,"]"),"Individual Points [".concat(t,"]"),e.toString()===a){var i=Number(t.toBigInt()),u={id:n,era:s,hash:r.toString(),block:n,date:c,points:i};"Era [".concat(u.era,"], Block [").concat(u.block,"], Date [").concat(u.date,"], Points [").concat(u.points,"], Hash [").concat(u.hash,"]"),o=u}})),t.abrupt("return",o);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"findActiveValidators",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){var a,r,s,c,i,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getBlock(e);case 2:a=t.sent,r=a.block.header.number.toNumber();case 4:return t.next=6,this.api.rpc.chain.getBlockHash(r);case 6:return c=t.sent,t.next=9,this.api.query.staking.snapshotValidators.at(c);case 9:if((i=t.sent).isEmpty){t.next=15;break}return t.next=13,this.api.query.staking.validatorCount.at(c);case 13:o=t.sent.toNumber(),s=Array.from(i.unwrap()).slice(0,o);case 15:n?--r:++r;case 16:if(void 0===s){t.next=4;break}case 17:return t.abrupt("return",s);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"validatorsData",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.query.session.validators();case 2:return e=t.sent,t.next=5,this.api.query.staking.currentEra();case 5:if(!(n=t.sent).isSome){t.next=12;break}return t.next=9,this.api.query.staking.erasTotalStake(n.unwrap());case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=new w.a(0);case 13:return a=t.t0,t.abrupt("return",{count:e.length,validators:e.toJSON(),total_stake:a.toNumber()});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),E=n(33);function N(t){return Promise.all(Object.entries(t).map((function(t){var e=Object(k.a)(t,2),n=e[0],a=e[1];return a instanceof Promise?a.then((function(t){return[n,t]})):new Promise((function(t){return t([n,a])}))}))).then((function(t){return t.reduce((function(t,e){var n=Object(k.a)(e,2),a=n[0],r=n[1];return Object(l.a)(Object(l.a)({},t),{},Object(E.a)({},a,r))}),{})}))}var H=new B("wss://rome-rpc-endpoint.joystream.org:9944/");function D(){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.init;case 2:return t.t0=N,t.next=5,H.finalizedBlockHeight();case 5:return t.t1=t.sent,t.t2={finalizedBlockHeight:t.t1},t.next=9,(0,t.t0)(t.t2);case 9:return e=t.sent,t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t,e){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.init;case 2:return t.t0=N,t.next=5,H.getActiveErasForBlock(e,n);case 5:return t.t1=t.sent,t.t2={status:t.t1},t.next=9,(0,t.t0)(t.t2);case 9:return a=t.sent,t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=n(802),C=n(803),L=n(810),R=n(809),W=n(804),F=n(799),T=n(23),Y=n(805),_=n(528),z=n(48),V=function(t){Object(b.a)(n,t);var e=Object(v.a)(n);function n(t){var a;return Object(d.a)(this,n),(a=e.call(this,t)).state={shouldStop:!1,rows:[],columns:[{field:"era",headerName:"Era",width:100,sortable:!0,headerAlign:"center"},{field:"block",headerName:"Block",width:100,sortable:!0,headerAlign:"center"},{field:"date",headerName:"Date",width:200,sortable:!0,headerAlign:"center"},{field:"points",headerName:"Points",width:100,sortable:!0,headerAlign:"center"},{field:"hash",headerName:"Block Hash",width:500,sortable:!1,headerAlign:"center"}],stash:"5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW",startBlock:1069639,endBlock:1270177,isLoading:!1,lastBlock:0,currentBlock:0,progress:{value:0,min:0,max:0}},a.getStatus=a.getStatus.bind(Object(f.a)(a)),a.setStash=a.setStash.bind(Object(f.a)(a)),a.setBlockStart=a.setBlockStart.bind(Object(f.a)(a)),a.setBlockEnd=a.setBlockEnd.bind(Object(f.a)(a)),a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=setInterval((function(){return n.updateLastBlock()}),7e3),this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{timerId:e})}));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.timerId&&clearInterval(this.state.timerId)}},{key:"updateLastBlock",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D();case 2:e=t.sent,this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{lastBlock:e.finalizedBlockHeight})}));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setStash",value:function(t){this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{stash:t.target.value})}))}},{key:"setBlockStart",value:function(t){this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{startBlock:t.target.value})}))}},{key:"setBlockEnd",value:function(t){this.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{endBlock:t.target.value})}))}},{key:"getStatus",value:function(){var t=Object(h.a)(u.a.mark((function t(){var e,n,a,r,s,c,o,h=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.state.stash,n=this.state.startBlock,a=this.state.endBlock,!this.state.isLoading){t.next=7;break}return this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{shouldStop:!0,isLoading:!1})})),t.abrupt("return");case 7:if(this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!0,rows:[]})})),!(n<a)){t.next=21;break}r=u.a.mark((function t(r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.state.shouldStop){t.next=3;break}return h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{shouldStop:!1,progress:{value:0,min:0,max:0}})})),t.abrupt("return","break");case 3:return h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{progress:{value:r,min:n,max:a}})})),t.next=6,q(e,r);case 6:(s=t.sent)&&s.status&&h.state.rows.indexOf(s.status)<0&&h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{rows:[].concat(Object(i.a)(h.state.rows),[s.status])})})),r.toString()===a.toString()&&h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!1})}));case 9:case"end":return t.stop()}}),t)})),s=n;case 11:if(!(s<=a)){t.next=19;break}return t.delegateYield(r(s),"t0",13);case 13:if("break"!==t.t0){t.next=16;break}return t.abrupt("break",19);case 16:s+=1,t.next=11;break;case 19:t.next=31;break;case 21:c=u.a.mark((function t(r){var s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.state.shouldStop){t.next=3;break}return h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{shouldStop:!1,progress:{value:0,min:0,max:0}})})),t.abrupt("return","break");case 3:return h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{progress:{value:r,min:n,max:a}})})),t.next=6,q(e,r);case 6:(s=t.sent)&&s.status&&h.state.rows.indexOf(s.status)<0&&h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{rows:[].concat(Object(i.a)(h.state.rows),[s.status])})})),r.toString()===a.toString()&&h.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{isLoading:!1})}));case 9:case"end":return t.stop()}}),t)})),o=n;case 23:if(!(o>=a)){t.next=31;break}return t.delegateYield(c(o),"t1",25);case 25:if("break"!==t.t1){t.next=28;break}return t.abrupt("break",31);case 28:o-=1,t.next=23;break;case 31:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return Object(z.jsx)("div",{className:"App",children:Object(z.jsx)(A.a,{maxWidth:"lg",children:Object(z.jsxs)(C.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3,children:[Object(z.jsx)(C.a,{container:!0,item:!0,lg:12}),Object(z.jsx)("img",{src:m,className:"App-logo",alt:"Joystream logo"}),Object(z.jsx)(C.a,{container:!0,item:!0,lg:12,children:Object(z.jsx)(L.a,{onChange:this.setStash,fullWidth:!0,id:"stash",label:"Stash",value:this.state.stash,variant:"filled"})}),Object(z.jsx)(C.a,{container:!0,item:!0,lg:12,children:Object(z.jsx)(L.a,{onChange:this.setBlockStart,fullWidth:!0,id:"block-start",label:"Start Block",value:this.state.startBlock,variant:"filled"})}),Object(z.jsx)(C.a,{container:!0,item:!0,lg:12,children:Object(z.jsx)(L.a,{onChange:this.setBlockEnd,fullWidth:!0,id:"block-end",label:this.state.lastBlock>0?"End Block (Last block: ".concat(this.state.lastBlock,")"):"End Block",value:this.state.endBlock,variant:"filled"})}),Object(z.jsx)(C.a,{container:!0,item:!0,lg:12,children:Object(z.jsx)(M,{fullWidth:!0,onClick:this.getStatus,color:"primary",children:this.state.isLoading?"Stop loading":"Load data"})}),(t=this.state.progress,t.value>0?Object(z.jsx)(C.a,{container:!0,item:!0,lg:12,children:Object(z.jsx)("div",{style:{width:"98%"},children:Object(z.jsxs)(R.a,{display:"flex",alignItems:"center",children:[Object(z.jsx)(R.a,{width:"100%",mr:1,children:Object(z.jsx)(W.a,{variant:"determinate",value:K(t.value,t.min,t.max)})}),Object(z.jsx)(R.a,{minWidth:35,style:{whiteSpace:"nowrap"},children:Object(z.jsx)(F.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(K(t.value,t.min,t.max)),"% (").concat(t.value,"/").concat(t.max,")")})})]})})}):null),Object(z.jsx)("div",{style:{height:600,width:"98%"},children:Object(z.jsx)(_.a,{rows:this.state.rows,columns:this.state.columns,pageSize:50})})]})})});var t}}]),n}(a.Component);function K(t,e,n){return 100*(t-e)/(n-e)}var M=Object(T.a)({root:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,color:"#ffffff",backgroundColor:"#0063cc",borderColor:"#0063cc",fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{backgroundColor:"#0069d9",borderColor:"#0062cc",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"#0062cc",borderColor:"#005cbf"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})(Y.a),U=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,815)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),s(t),c(t)}))};c.a.render(Object(z.jsx)(r.a.StrictMode,{children:Object(z.jsx)(V,{})}),document.getElementById("root")),U()}},[[745,1,2]]]);
//# sourceMappingURL=main.3a10ea20.chunk.js.map