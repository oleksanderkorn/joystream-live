(this["webpackJsonpjoystream-validator-stats"]=this["webpackJsonpjoystream-validator-stats"]||[]).push([[0],{570:function(t,e,n){},578:function(t,e){},580:function(t,e){},585:function(t,e){},588:function(t,e){},589:function(t,e){},647:function(t,e){},650:function(t,e){},652:function(t,e){},662:function(t,e){},664:function(t,e){},690:function(t,e){},692:function(t,e){},697:function(t,e){},699:function(t,e){},705:function(t,e){},707:function(t,e){},719:function(t,e){},722:function(t,e){},736:function(t,e){},739:function(t,e){},747:function(t,e,n){},750:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(47),i=n.n(c),s=n(180),o=n(15),u=n(22),l=n.n(u),d=n(36),b=n(1),f=n.p+"static/media/joystream.f5df567f.svg",h=(n(570),n(313)),p=n.n(h);p.a.defaultFormat="YYYY-MM-DD HH:mm:ss";var j=n(4),m=n(9),v=n(820),x=n(825),O=n(521),g=n(528),k=n(247),y=n.n(k);Object(g.config)();var w=function(){function t(e){Object(j.a)(this,t),this.endpoint=void 0,this.isReady=void 0,this.api=void 0;var n=e||"wss://rome-rpc-endpoint.joystream.org:9944/";this.endpoint=n,this.isReady=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new v.a({provider:new x.a(n),types:O.types}).isReadyOrError;case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))()}return Object(m.a)(t,[{key:"init",get:function(){var t=this;return this.isReady.then((function(e){return t.api=e,t}))}},{key:"totalIssuance",value:function(){var t=Object(d.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=6;break}return t.next=3,this.api.query.balances.totalIssuance();case 3:t.t0=t.sent,t.next=9;break;case 6:return t.next=8,this.api.query.balances.totalIssuance.at(e);case 8:t.t0=t.sent;case 9:return n=t.t0,t.abrupt("return",n.toNumber());case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"systemData",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.api.rpc.system.chain(),this.api.rpc.system.name(),this.api.rpc.system.version()]);case 2:return e=t.sent,n=Object(b.a)(e,3),a=n[0],r=n[1],c=n[2],t.abrupt("return",{chain:a.toString(),nodeName:r.toString(),nodeVersion:c.toString()});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedHash",value:function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.api.rpc.chain.getFinalizedHead());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"finalizedBlockHeight",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.finalizedHash();case 2:return e=t.sent,t.next=5,this.api.rpc.chain.getHeader("".concat(e));case 5:return n=t.sent,a=n.number,t.abrupt("return",a.toNumber());case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getActiveErasForBlock",value:function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,r,c,i,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e,t.next=3,this.api.rpc.chain.getBlockHash(n);case 3:return r=t.sent,t.next=6,this.api.query.staking.activeEra.at(r);case 6:return c=t.sent.unwrap().index.toNumber(),t.t0=Date,t.next=10,this.api.query.timestamp.now.at(r);case 10:return t.t1=t.sent.toNumber(),i=new t.t0(t.t1).toISOString(),t.next=14,this.api.query.staking.erasRewardPoints.at(r,c);case 14:return s=t.sent,o=void 0,s.individual.forEach((function(t,e){if("Author Points [".concat(e,"]"),"Individual Points [".concat(t,"]"),e.toString()===a){var s=Number(t.toBigInt()),u={id:n,era:c,hash:r.toString(),block:n,date:i,points:s};"Era [".concat(u.era,"], Block [").concat(u.block,"], Date [").concat(u.date,"], Points [").concat(u.points,"], Hash [").concat(u.hash,"]"),o=u}})),t.abrupt("return",o);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"findActiveValidators",value:function(){var t=Object(d.a)(l.a.mark((function t(e,n){var a,r,c,i,s,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getBlock(e);case 2:a=t.sent,r=a.block.header.number.toNumber();case 4:return t.next=6,this.api.rpc.chain.getBlockHash(r);case 6:return i=t.sent,t.next=9,this.api.query.staking.snapshotValidators.at(i);case 9:if((s=t.sent).isEmpty){t.next=15;break}return t.next=13,this.api.query.staking.validatorCount.at(i);case 13:o=t.sent.toNumber(),c=Array.from(s.unwrap()).slice(0,o);case 15:n?--r:++r;case 16:if(void 0===c){t.next=4;break}case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"validatorsData",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.query.session.validators();case 2:return e=t.sent,t.next=5,this.api.query.staking.currentEra();case 5:if(!(n=t.sent).isSome){t.next=12;break}return t.next=9,this.api.query.staking.erasTotalStake(n.unwrap());case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=new y.a(0);case 13:return a=t.t0,t.abrupt("return",{count:e.length,validators:e.toJSON(),total_stake:a.toNumber()});case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),S=n(34);function N(t){return Promise.all(Object.entries(t).map((function(t){var e=Object(b.a)(t,2),n=e[0],a=e[1];return a instanceof Promise?a.then((function(t){return[n,t]})):new Promise((function(t){return t([n,a])}))}))).then((function(t){return t.reduce((function(t,e){var n=Object(b.a)(e,2),a=n[0],r=n[1];return Object(s.a)(Object(s.a)({},t),{},Object(S.a)({},a,r))}),{})}))}var E=new w;function B(){return I.apply(this,arguments)}function I(){return(I=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.init;case 2:return t.t0=N,t.next=5,E.totalIssuance();case 5:return t.t1=t.sent,t.next=8,E.finalizedBlockHeight();case 8:return t.t2=t.sent,t.next=11,E.validatorsData();case 11:return t.t3=t.sent,t.next=14,E.systemData();case 14:return t.t4=t.sent,t.t5={totalIssuance:t.t1,finalizedBlockHeight:t.t2,validators:t.t3,system:t.t4},t.next=18,(0,t.t0)(t.t5);case 18:return e=t.sent,t.abrupt("return",e);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(t,e){return A.apply(this,arguments)}function A(){return(A=Object(d.a)(l.a.mark((function t(e,n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.init;case 2:return t.t0=N,t.next=5,E.getActiveErasForBlock(e,n);case 5:return t.t1=t.sent,t.t2={status:t.t1},t.next=9,(0,t.t0)(t.t2);case 9:return a=t.sent,t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var C=n(819),H=n(813),P=n(824),q=n(531),z=n(20),F=n(812),L=Object(z.a)({root:{boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px",border:"1px solid",lineHeight:1.5,color:"#ffffff",backgroundColor:"#4138ff",borderColor:"#4138ff",fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),"&:hover":{backgroundColor:"#4138dd",borderColor:"#4138dd",boxShadow:"none"},"&:active":{boxShadow:"none",backgroundColor:"#4138ee",borderColor:"#4138ee"},"&:focus":{boxShadow:"0 0 0 0.2rem rgba(0,123,255,.5)"}}})(F.a),R=n(822),T=n(814),V=n(809),W=n(35);function M(t,e,n){return 100*(Number(t)-Number(e))/(Number(n)-Number(e))}function Y(t){return t.value>0?Object(W.jsx)(H.a,{container:!0,item:!0,lg:12,children:Object(W.jsx)("div",{style:{width:"98%"},children:Object(W.jsxs)(R.a,{display:"flex",alignItems:"center",children:[Object(W.jsx)(R.a,{width:"100%",mr:1,children:Object(W.jsx)(T.a,{variant:"determinate",value:M(t.value,t.min,t.max)})}),Object(W.jsx)(R.a,{minWidth:35,style:{whiteSpace:"nowrap"},children:Object(W.jsx)(V.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(M(t.value,t.min,t.max)),"% (").concat(t.value,"/").concat(t.max,")")})})]})})}):null}var J=n(823),U=n(815),Z=n(816),K=n(817),X=n(818),_=Object(U.a)({root:{minWidth:"98%",textAlign:"left"},title:{fontSize:18},pos:{marginBottom:12}}),G=function(t){var e=_(),n=t.activeEras,a=void 0,r=void 0,c="";return t.activeEras.length>0?(a=(n=t.activeEras.sort((function(t,e){return t.block-e.block})))[0],r=n[n.length-1],c="\n    Validator Date: ".concat(new Date(a.date).toLocaleDateString(),"-").concat(new Date(r.date).toLocaleDateString(),"\n    Description: I was an active validator from era/block ").concat(a.era,"/").concat(a.block," to era/block ").concat(r.era,"/").concat(r.block," with stash account ").concat(t.stash,"\n    "),Object(W.jsx)(H.a,{container:!0,item:!0,lg:12,children:Object(W.jsxs)(Z.a,{className:e.root,children:[Object(W.jsxs)(K.a,{children:[Object(W.jsx)(V.a,{className:e.title,color:"textPrimary",gutterBottom:!0,children:"Scoring period text:"}),Object(W.jsx)(V.a,{className:e.pos,color:"textSecondary",children:c})]}),Object(W.jsx)(X.a,{children:Object(W.jsx)(F.a,{onClick:function(){return navigator.clipboard.writeText(c)},size:"small",children:"Copy to clipboard"})})]})})):Object(W.jsx)(Z.a,{className:e.root,children:Object(W.jsx)(K.a,{children:Object(W.jsx)(V.a,{className:e.pos,color:"textSecondary",children:"No Data Available"})})})},Q=function(){var t=Object(a.useState)(!1),e=Object(b.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)([]),i=Object(b.a)(c,2),u=i[0],h=i[1],p=Object(a.useState)([{field:"era",headerName:"Era",width:100,sortable:!0,headerAlign:"center"},{field:"block",headerName:"Block",width:100,sortable:!0,headerAlign:"center"},{field:"date",headerName:"Date",width:200,sortable:!0,headerAlign:"center"},{field:"points",headerName:"Points",width:100,sortable:!0,headerAlign:"center"},{field:"hash",headerName:"Block Hash",width:500,sortable:!1,headerAlign:"center"}]),j=Object(b.a)(p,1)[0],m=Object(a.useState)("5EhDdcWm4TdqKp1ew1PqtSpoAELmjbZZLm5E34aFoVYkXdRW"),v=Object(b.a)(m,2),x=v[0],O=v[1],g=Object(a.useState)(1274283),k=Object(b.a)(g,2),y=k[0],w=k[1],S=Object(a.useState)(1274383),N=Object(b.a)(S,2),E=N[0],I=N[1],A=Object(a.useState)(!1),z=Object(b.a)(A,2),F=z[0],R=z[1],T=Object(a.useState)(0),V=Object(b.a)(T,2),M=V[0],U=V[1],Z=Object(a.useState)({value:0,min:0,max:0}),K=Object(b.a)(Z,2),X=K[0],_=K[1],Q=Object(a.useState)([]),$=Object(b.a)(Q,2),tt=$[0],et=$[1];Object(a.useEffect)((function(){nt();var t=setInterval((function(){nt()}),1e4);return function(){return clearInterval(t)}}),[]);var nt=function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B();case 2:e=t.sent,U(e.finalizedBlockHeight),et(e.validators.validators);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),at=function(){var t=Object(d.a)(l.a.mark((function t(){var e,n,a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ot(),!(y<E)){t.next=16;break}e=Number(y);case 3:if(!(e<=Number(E))){t.next=14;break}if(n=!1,r((function(t){return n=t,t})),!n){t.next=9;break}return rt(),t.abrupt("break",14);case 9:return t.next=11,ct(Number(e));case 11:e+=1,t.next=3;break;case 14:t.next=28;break;case 16:a=Number(y);case 17:if(!(a>=Number(E))){t.next=28;break}if(c=!1,r((function(t){return c=t,t})),!c){t.next=23;break}return rt(),t.abrupt("break",28);case 23:return t.next=25,ct(Number(a));case 25:a-=1,t.next=17;break;case 28:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),rt=function(){r(!1),_({value:0,min:0,max:0})},ct=function(){var t=Object(d.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return st(e),t.next=3,D(x,e);case 3:(n=t.sent)&&n.status&&u.indexOf(n.status)<0&&h((function(t){return[].concat(Object(o.a)(t),[n.status])})),it(e);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),it=function(t){t.toString()===E.toString()&&R(!1)},st=function(t){_({value:t,min:y,max:E})},ot=function(){R(!0),h([])},ut=!x||!y||!E,lt=M>0?"End Block (Last block: ".concat(M,")"):"End Block";return Object(W.jsx)("div",{className:"App",children:Object(W.jsx)(C.a,{maxWidth:"lg",children:Object(W.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:3,children:[Object(W.jsx)(H.a,{container:!0,item:!0,lg:12}),Object(W.jsx)("img",{src:f,className:"App-logo",alt:"Joystream logo"}),Object(W.jsx)(H.a,{container:!0,item:!0,lg:12,children:Object(W.jsx)(J.a,{freeSolo:!0,style:{width:"100%"},options:tt,onChange:function(t,e){return O(e||"")},value:x,renderInput:function(t){return Object(W.jsx)(P.a,Object(s.a)(Object(s.a)({},t),{},{label:"Validator stash address",variant:"filled"}))}})}),Object(W.jsxs)(H.a,{container:!0,item:!0,lg:12,children:[Object(W.jsx)(P.a,{type:"number",onChange:function(t){return w(t.target.value)},style:{width:"49%",marginRight:"24px"},id:"block-start",label:"Start Block",value:y,variant:"filled"}),Object(W.jsx)(P.a,{type:"number",onChange:function(t){return I(t.target.value)},style:{width:"49%"},id:"block-end",label:lt,value:E,variant:"filled"})]}),Object(W.jsx)(G,{stash:x,activeEras:u}),Object(W.jsx)(H.a,{container:!0,item:!0,lg:12,children:Object(W.jsx)(L,{disabled:ut,fullWidth:!0,onClick:function(){return F?void(n||(r(!0),R(!1))):at()},color:"primary",children:F?"Stop loading":"Load data"})}),Object(W.jsx)(Y,Object(s.a)({},X)),Object(W.jsx)("div",{style:{height:600,width:"98%"},children:Object(W.jsx)(q.a,{rows:u,columns:j,pageSize:50})})]})})})},$=(n(747),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,828)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))});i.a.render(Object(W.jsx)(r.a.StrictMode,{children:Object(W.jsx)(Q,{})}),document.getElementById("root")),$()}},[[750,1,2]]]);
//# sourceMappingURL=main.334e6d0c.chunk.js.map